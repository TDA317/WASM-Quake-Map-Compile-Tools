<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTML Light</title>
    <style>
        body { font-family: sans-serif; background:#f0f0f0; color:#333; margin:0; padding:20px; }
        #main-container { display:grid; grid-template-columns:1fr 2fr; gap:20px; }
        #controls, #output { background:#fff; padding:20px; border-radius:8px; box-shadow:0 2px 4px rgba(0,0,0,0.1); }
        fieldset { border:1px solid #ccc; border-radius:4px; margin-bottom:20px; padding:15px; }
        legend { font-weight:bold; color:#555; }
        label { display:block; margin-bottom:5px; }
        input[type="file"], button, input[type="number"], input[type="text"] { width:100%; padding:10px; margin-bottom:10px; border-radius:4px; border:1px solid #ccc; box-sizing:border-box; }
        button { background:#007bff; color:white; font-weight:bold; cursor:pointer; border:none; }
        button:hover { background:#0056b3; }
        #log-output { background:#1e1e1e; color:#d4d4d4; padding:15px; border-radius:4px; height:400px; overflow-y:scroll; white-space:pre-wrap; word-wrap:break-word; font-family:monospace; }
        .option-group { display:flex; align-items:center; margin-bottom:10px; }
        .option-group input { margin-right:10px; }
        #spinner { width:16px;height:16px;border-radius:50%;background:#007bff;display:none;animation: spin 1s linear infinite; }
        @keyframes spin { from { transform: rotate(0deg);} to { transform: rotate(360deg);} }
    </style>
</head>
<body>
    <h1>HTML Light</h1>
    <p>Run the Quake light tool in the browser. Upload a .bsp file and choose options, then click "Light".</p>

    <div id="main-container">
        <div id="controls">
            <h2>Controls</h2>
            <fieldset>
                <legend>Input Files</legend>
                <label for="bsp-file">.bsp file:</label>
                <input type="file" id="bsp-file" accept=".bsp,.BSP">
            </fieldset>

            <fieldset>
                <legend>Light Options</legend>
                <label for="option-threads">Threads (leave empty for default)</label>
                <input type="number" id="option-threads" placeholder="Default">
                <div class="option-group"><input type="checkbox" id="option-extra"><label for="option-extra">-extra (2x oversample)</label></div>
                <div class="option-group"><input type="checkbox" id="option-extra4"><label for="option-extra4">-extra4 (4x oversample)</label></div>
                <label for="option-dist">-dist (scaledist)</label>
                <input type="text" id="option-dist" placeholder="1.0">
                <label for="option-range">-range (rangescale)</label>
                <input type="text" id="option-range" placeholder="0.5">
                <label for="option-gate">-gate (fadegate)</label>
                <input type="text" id="option-gate" placeholder="EQUAL_EPSILON">
                <label for="option-light">-light (minlight)</label>
                <input type="text" id="option-light" placeholder="0">
                <div class="option-group"><input type="checkbox" id="option-addmin"><label for="option-addmin">-addmin</label></div>
                <div class="option-group"><input type="checkbox" id="option-lit"><label for="option-lit">-lit (write .lit)</label></div>
                <div class="option-group"><input type="checkbox" id="option-litonly"><label for="option-litonly">-litonly</label></div>
                <label for="option-soft">-soft (softsamples, optional numeric)</label>
                <input type="text" id="option-soft" placeholder="auto or number">
                <label for="option-anglescale">-anglescale (0.0 - 1.0)</label>
                <input type="text" id="option-anglescale" placeholder="0.5">
            </fieldset>

            <button id="light-button">Light</button>
        </div>

        <div id="output">
            <h2>Log</h2>
            <div id="status" style="display:flex;align-items:center;gap:12px;margin-bottom:8px;">
                <div id="spinner"></div>
                <div id="status-text" style="font-weight:bold;color:#333;">Idle</div>
                <div id="elapsed" style="color:#666;">0.0s</div>
                <div id="logcount" style="color:#666;">0 lines</div>
            </div>
            <pre id="log-output">Welcome! Upload a .bsp file and click Light to begin.</pre>
            <div id="download-container"></div>
        </div>
    </div>

    <script src="light-app.js"></script>
    <script src="light.js"></script>
</body>
</html>
